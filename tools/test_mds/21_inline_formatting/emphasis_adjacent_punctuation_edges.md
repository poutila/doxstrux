Edge cases around emphasis and punctuation:

**bold**. *italic*, __bold__! _italic_? (**bold**) and *italic*:

Intraword emphasis should not happen: un*der*score and under_score
